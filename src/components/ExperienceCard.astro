---
import Icon from "./Icon.astro";

export interface Props {
    title: string;
    company: string;
    period: string;
    description: string;
    employmentType?: string;
    location?: string;
    logo?: string;
    logoType?: "image" | "icon";
    skills?: string[];
    pinned?: boolean;
}

const {
    title,
    company,
    period,
    description,
    employmentType,
    location,
    logo,
    logoType = "image",
    skills,
    pinned = false,
} = Astro.props;
---

<article class={`experience-card ${pinned ? "pinned" : ""}`}>
    <div class="experience-header">
        <div class="experience-title-row">
            {
                logo && (
                    <div class="company-logo">
                        {logoType === "icon" ? (
                            <Icon icon={logo as any} size="3em" />
                        ) : (
                            <img src={logo} alt={`${company} logo`} />
                        )}
                    </div>
                )
            }
            <div class="title-content">
                <div class="title-row">
                    <h3 class="experience-title">{title}</h3>
                    {
                        employmentType && employmentType === "Internship" && (
                            <span class="employment-type">
                                {employmentType}
                            </span>
                        )
                    }
                </div>
                <p class="experience-company">{company}</p>
                <div class="experience-meta">
                    <p class="experience-period">{period}</p>
                    {location && <p class="experience-location">{location}</p>}
                </div>
            </div>
        </div>
    </div>
    <p class="experience-description">{description}</p>
    {
        skills && skills.length > 0 && (
            <div class="skills-section">
                <p class="skills-label">Skills and Technologies</p>
                <div class="skills-list">
                    {skills.map((skill) => (
                        <span class="skill-tag">{skill}</span>
                    ))}
                </div>
            </div>
        )
    }
</article>

<style>
    .experience-card {
        border-radius: 0.5rem;
        padding: 2.5rem;
        border: 1px solid var(--gray-200);
        background: transparent;
        transition:
            transform 0.3s ease,
            border-color 0.3s ease,
            box-shadow 0.3s ease;
        height: 100%;
        display: flex;
        flex-direction: column;
        position: relative;
    }

    .experience-card:hover {
        transform: translateY(-2px);
        border-color: var(--gray-300);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
    }

    .experience-card.pinned::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: var(--link-color);
        border-radius: 0.5rem 0.5rem 0 0;
    }

    .experience-header {
        margin-bottom: 1.5rem;
    }

    .experience-title-row {
        display: flex;
        align-items: flex-start;
        gap: 1rem;
        margin-bottom: 0.5rem;
        flex-wrap: wrap;
    }

    .company-logo {
        flex-shrink: 0;
        width: 80px;
        height: 80px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 0.5rem;
        overflow: hidden;
        background: var(--gray-900);
        border: 1px solid var(--gray-200);
    }

    .company-logo img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        padding: 12px;
    }

    .title-content {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
        flex: 1;
    }

    .title-row {
        display: flex;
        align-items: center;
        gap: 1rem;
        flex-wrap: wrap;
    }

    .experience-title {
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 0;
        line-height: 1.3;
        color: var(--gray-0);
    }

    .employment-type {
        font-size: 0.875rem;
        font-weight: 500;
        padding: 0.25rem 0.75rem;
        border-radius: 0.25rem;
        background: var(--gray-800);
        color: var(--gray-300);
        border: 1px solid var(--gray-700);
        white-space: nowrap;
    }

    .experience-company {
        font-size: 1.125rem;
        font-weight: 500;
        margin-bottom: 0;
        color: var(--gray-300);
    }

    .experience-meta {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
        align-items: center;
        margin-top: 0;
    }

    .experience-period {
        font-size: 0.875rem;
        color: var(--gray-400);
        margin-bottom: 0;
    }

    .experience-location {
        font-size: 0.875rem;
        color: var(--gray-400);
        margin-bottom: 0;
    }

    .experience-description {
        font-size: 1rem;
        line-height: 1.7;
        color: var(--gray-100);
        flex: 1;
        margin-bottom: 1.5rem;
    }

    .skills-section {
        margin-top: auto;
        padding-top: 1.5rem;
        border-top: 1px solid var(--gray-200);
    }

    .skills-label {
        font-size: 0.75rem;
        font-weight: 600;
        margin-bottom: 0.75rem;
        color: var(--gray-500);
        text-transform: uppercase;
        letter-spacing: 0.08em;
    }

    .skills-list {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin: 0;
    }

    .skill-tag {
        background: var(--gray-800);
        color: var(--gray-300);
        padding: 0.25rem 0.75rem;
        border-radius: 0.25rem;
        font-size: 0.875rem;
        font-weight: 500;
        white-space: nowrap;
        border: 1px solid var(--gray-700);
    }

    @media (max-width: 768px) {
        .experience-card {
            padding: 2rem;
        }

        .company-logo {
            width: 64px;
            height: 64px;
        }

        .experience-title {
            font-size: 1.25rem;
        }

        .experience-company {
            font-size: 1rem;
        }

        .experience-description {
            font-size: 0.9375rem;
        }
    }
</style>
